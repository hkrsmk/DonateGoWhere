#!/bin/bash
# if cookie expires, go to the website (in Referer) and try again

curl 'https://www.charities.gov.sg/_layouts/15/CPInternet/AdvanceSearchHandler.ashx' -H 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:89.0) Gecko/20100101 Firefox/89.0' -H 'Accept: application/json' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://www.charities.gov.sg/Pages/AdvanceSearch.aspx?q=' -H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H 'X-Requested-With: XMLHttpRequest' -H 'Origin: https://www.charities.gov.sg' -H 'DNT: 1' -H 'Connection: keep-alive' -H 'Cookie: ASP.NET_SessionId=szooco0lw1sk4qojtwrpu21l; BIGipServerPOOL_T02190AENW002_80=!3MsLZOFuuywBzRr9UGIMe/rZmNvAHJ8nl3EDJNl4YNEpwl8SZJUSUZeI4Aq3TXGTkKVBW6uE9g9DTg==; BIGipServerPOOL_T02190AENW003_80=!SGuJELhZyFsU2jb9UGIMe/rZmNvAHLxpGikbCNdSXJXeqhzN47jLnj4aZPD051YOVtd8mGFy9/fzdOTaYGbAtMksNN7h/G0NAyPTQ4k=; visid_incap_1863467=tnJyN2zfT4mgn0GOLTXWFlPb7mAAAAAAQUIPAAAAAACLm/wNxzcKbS7VMGwA5aTf; incap_ses_961_1863467=2V94NtHCFEQ8z0q4xShWDVPb7mAAAAAAof94WZt6oFpipW+9Hruojg==; __atuvc=11%7C28; __atuvs=60eedb58cc6dd98a00a; __atssc=google%3B4; _sp_ses.2953=*; _sp_id.2953=e13d9296-4f83-4dc0-a27c-eee8e749f764.1626266457.1.1626271261.1626266457.bbde369d-b195-49b8-9a50-a90305e9ab95; AMCV_DF38E5285913269B0A495E5A%40AdobeOrg=1075005958%7CMCIDTS%7C18823%7CMCMID%7C28739130126954910488316758845628332497%7CMCOPTOUT-1626278460s%7CNONE%7CvVersion%7C4.4.1; WSS_FullScreenMode=false; AMCVS_DF38E5285913269B0A495E5A%40AdobeOrg=1' -H 'TE: Trailers' --data-raw 'draw=1&columns%5B0%5D%5Bdata%5D=CharityIPCName&columns%5B0%5D%5Bname%5D=&columns%5B0%5D%5Bsearchable%5D=true&columns%5B0%5D%5Borderable%5D=true&columns%5B0%5D%5Bsearch%5D%5Bvalue%5D=&columns%5B0%5D%5Bsearch%5D%5Bregex%5D=false&columns%5B1%5D%5Bdata%5D=SectorAdministrato&columns%5B1%5D%5Bname%5D=&columns%5B1%5D%5Bsearchable%5D=true&columns%5B1%5D%5Borderable%5D=false&columns%5B1%5D%5Bsearch%5D%5Bvalue%5D=&columns%5B1%5D%5Bsearch%5D%5Bregex%5D=false&columns%5B2%5D%5Bdata%5D=Activities&columns%5B2%5D%5Bname%5D=&columns%5B2%5D%5Bsearchable%5D=true&columns%5B2%5D%5Borderable%5D=false&columns%5B2%5D%5Bsearch%5D%5Bvalue%5D=&columns%5B2%5D%5Bsearch%5D%5Bregex%5D=false&columns%5B3%5D%5Bdata%5D=RegistrationDate&columns%5B3%5D%5Bname%5D=&columns%5B3%5D%5Bsearchable%5D=true&columns%5B3%5D%5Borderable%5D=true&columns%5B3%5D%5Bsearch%5D%5Bvalue%5D=&columns%5B3%5D%5Bsearch%5D%5Bregex%5D=false&order%5B0%5D%5Bcolumn%5D=0&order%5B0%5D%5Bdir%5D=asc&start=0&length=2958&search%5Bvalue%5D=&search%5Bregex%5D=false&query=%3FadvType%3D0&sortColumn=CharityIPCName&sortDirection=true&reqType=charityInfo&filterColumn=' > allcharities.json